
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Speaking</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --purple: #A29BFE;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --glass-bg: rgba(255, 255, 255, 0.4);
            --glass-border: rgba(255, 255, 255, 0.8);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Nunito', sans-serif;
            color: var(--text-dark);
            overflow-x: hidden;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffd1ff, #a1c4fd, #c2e9fb);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            cursor: pointer;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        #animal-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }
        
        header {
            height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        h1 {
            font-size: 5rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary), #FF8E53);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
            line-height: 1.1;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1));
        }
        
        p.subtitle {
            font-size: 1.5rem;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 50px;
            max-width: 700px;
            background: var(--glass-bg);
            padding: 20px 30px;
            border-radius: 30px;
            backdrop-filter: blur(5px);
        }
        
        .btn-cute {
            padding: 15px 50px;
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }
        .btn-cute:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 30px rgba(255, 107, 107, 0.5);
        }
        
        /* SECTION CONTAINERS */
        .lessons-section { 
            padding: 50px 0 100px 0; 
        }
        
        .section-container {
            margin-bottom: 80px;
            padding: 40px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 40px;
            border: 3px solid var(--glass-border);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 15px;
            display: inline-block;
            padding: 15px 35px;
            border-radius: 25px;
            backdrop-filter: blur(5px);
        }
        
        .section-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            font-weight: 600;
        }
        
        /* M√†u cho t·ª´ng section */
        .section-1 .section-title { 
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
        }
        .section-2 .section-title { 
            background: linear-gradient(135deg, #4ECDC4, #44A08D);
            color: white;
        }
        .section-3 .section-title { 
            background: linear-gradient(135deg, #A29BFE, #6C5CE7);
            color: white;
        }
        .section-4 .section-title { 
            background: linear-gradient(135deg, #FFE66D, #FFA502);
            color: white;
        }
        
        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }
        
        .lesson-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px) saturate(150%);
            border: 3px solid var(--glass-border);
            border-radius: 35px;
            padding: 35px;
            height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        
        .lesson-card:hover {
            transform: translateY(-15px) scale(1.03);
            background: rgba(255, 255, 255, 0.7);
            box-shadow: 0 30px 50px rgba(0, 0, 0, 0.15);
        }
        
        .section-1 .lesson-card:hover { border-color: #FF6B6B; }
        .section-2 .lesson-card:hover { border-color: #4ECDC4; }
        .section-3 .lesson-card:hover { border-color: #A29BFE; }
        .section-4 .lesson-card:hover { border-color: #FFE66D; }
        
        .lesson-number {
            font-size: 5rem;
            font-weight: 800;
            color: rgba(255,255,255,0.5);
            position: absolute;
            top: -10px;
            right: 10px;
            z-index: 0;
            -webkit-text-stroke: 2px currentColor;
            opacity: 0.3;
        }
        
        .section-1 .lesson-number { color: #FF6B6B; }
        .section-2 .lesson-number { color: #4ECDC4; }
        .section-3 .lesson-number { color: #A29BFE; }
        .section-4 .lesson-number { color: #FFE66D; }
        
        .card-content {
            position: relative;
            z-index: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        
        .lesson-tag {
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .section-1 .lesson-tag { background: #FF6B6B; }
        .section-2 .lesson-tag { background: #4ECDC4; }
        .section-3 .lesson-tag { background: #A29BFE; }
        .section-4 .lesson-tag { background: #FFE66D; color: #2d3436; }
        
        .lesson-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--text-dark);
            line-height: 1.3;
        }
        
        .lesson-icon {
            font-size: 3rem;
            margin-bottom: auto;
            align-self: flex-start;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
        }
        
        /* MODAL */
        .lesson-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }
        .lesson-overlay.active { opacity: 1; pointer-events: all; }
        
        .overlay-content {
            width: 85%;
            height: 85%;
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid var(--secondary);
            border-radius: 50px;
            padding: 50px;
            position: relative;
            box-shadow: 0 30px 60px rgba(78, 205, 196, 0.3);
            display: grid;
            grid-template-columns: 1.5fr 2fr;
            gap: 50px;
        }
        
        .close-btn {
            position: absolute;
            top: 30px;
            right: 40px;
            font-size: 3rem;
            cursor: pointer;
            color: var(--primary);
            background: none;
            border: none;
            font-weight: 800;
            transition: 0.3s;
        }
        .close-btn:hover { transform: rotate(90deg) scale(1.2); }
        
        .video-placeholder {
            background: linear-gradient(to bottom right, var(--accent), var(--primary));
            border-radius: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.1);
            color: white;
            font-weight: 800;
            font-size: 1.5rem;
        }
        
        .lesson-details h2 {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 20px;
        }
        .lesson-details p, .lesson-details li {
            font-size: 1.2rem;
            color: var(--text-light);
        }
        /* CHATBOT STYLES */
        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            font-family: 'Nunito', sans-serif;
        }

        .chat-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--purple));
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.3s;
            font-size: 30px;
            border: 3px solid white;
        }

        .chat-button:hover { transform: scale(1.1) rotate(10deg); }

        .chat-window {
            position: absolute;
            bottom: 85px;
            right: 0;
            width: 350px;
            height: 500px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            border: 3px solid var(--primary);
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }

        .chat-window.active { display: flex; animation: slideUp 0.4s ease forwards; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-header {
            background: var(--primary);
            color: white;
            padding: 12px;
            font-weight: 800;
            display: flex;
            justify-content: space-between;
        }

        .chat-header span:last-child {
            font-size: 2rem;       
            cursor: pointer;
            line-height: 1;        
            transition: 0.3s;      
            display: inline-block;
        }

        .chat-header span:last-child:hover {
            transform: scale(1.2); 
            color: var(--accent);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            padding: 12px 16px;
            border-radius: 20px;
            max-width: 80%;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .user-msg {
            background: var(--secondary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .ai-msg {
            background: #f0f0f0;
            color: var(--text-dark);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .chat-input-area {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chat-input-area input {
            flex: 1;
            border: 2px solid #eee;
            padding: 10px 15px;
            border-radius: 20px;
            outline: none;
            font-family: 'Nunito';
        }

        .chat-input-area button {
            background: var(--primary);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="animal-canvas"></canvas>
    
    <div class="lesson-overlay" id="overlay">
        <div class="overlay-content">
    <button class="close-btn" onclick="closeLesson()">&times;</button>
    
    <div class="video-placeholder" id="video-container">
        <div style="text-align: center" id="placeholder-content">
            <span style="font-size: 4rem;">üéôÔ∏è</span><br>
            Speaking Practice Arena
        </div>
    </div>

    <div class="lesson-details">
        <span class="lesson-tag" style="background: var(--primary)">SPEAKING PART 1-3</span>
        <h2 id="modal-title">Lesson Title</h2>
        <p>B√†i h·ªçc t·∫≠p trung v√†o ph·∫£n x·∫° Speaking t·ª± nhi√™n. H·ªá th·ªëng AI s·∫Ω ch·∫•m ƒëi·ªÉm ƒë·ªô tr√¥i ch·∫£y v√† t·ª´ v·ª±ng.</p>
        <br>
        <ul style="list-style: none;">
            <li style="margin-bottom: 15px; display: flex; align-items: center; font-weight: 700; color: var(--text-dark);">
                <span style="margin-right: 10px; color: var(--secondary); font-size: 1.5rem;">‚ú®</span> Fluency Booster
            </li>
            <li style="margin-bottom: 15px; display: flex; align-items: center; font-weight: 700; color: var(--text-dark);">
                 <span style="margin-right: 10px; color: var(--secondary); font-size: 1.5rem;">üó£Ô∏è</span> Pronunciation Check
            </li>
            <li style="margin-bottom: 15px; display: flex; align-items: center; font-weight: 700; color: var(--text-dark);">
                 <span style="margin-right: 10px; color: var(--secondary); font-size: 1.5rem;">üí°</span> Advanced Vocabulary
            </li>
        </ul>
        <button class="btn-cute" style="margin-top: 30px; width: 100%;" onclick="playVideo()">B·∫Øt ƒê·∫ßu H·ªçc ngay!</button>
    </div>
</div>
    </div>

    <div class="container">
        <header>
            <h1>IELTS SPEAKING <br> WONDERLAND ‚ú®</h1>
            <p class="subtitle">Chinh ph·ª•c k·ªπ nƒÉng N√≥i v·ªõi 40 ch·ªß ƒë·ªÅ si√™u th√∫ v·ªã ƒë∆∞·ª£c chia th√†nh 4 giai ƒëo·∫°n h·ªçc t·∫≠p!</p>
            <button class="btn-cute" onclick="scrollToLessons()">Kh√°m ph√° 40 Ch·ªß ƒë·ªÅ üöÄ</button>
        </header>

        <div class="lessons-section" id="lessons">
            
            <!-- SECTION 1: Beginner Foundation (1-10) -->
            <div class="section-container section-1">
                <div class="section-header">
                    <div class="section-title">üå± Giai ƒëo·∫°n 1: N·ªÅn t·∫£ng c∆° b·∫£n</div>
                    <p class="section-subtitle">B√†i 1-10: X√¢y d·ª±ng n·ªÅn t·∫£ng Speaking v·ªØng ch·∫Øc</p>
                </div>
                <div class="lessons-grid" id="section-1-grid"></div>
            </div>

            <!-- SECTION 2: Intermediate Skills (11-20) -->
            <div class="section-container section-2">
                <div class="section-header">
                    <div class="section-title">üöÄ Giai ƒëo·∫°n 2: Ph√°t tri·ªÉn k·ªπ nƒÉng</div>
                    <p class="section-subtitle">B√†i 11-20: N√¢ng cao kh·∫£ nƒÉng di·ªÖn ƒë·∫°t</p>
                </div>
                <div class="lessons-grid" id="section-2-grid"></div>
            </div>

            <!-- SECTION 3: Advanced Fluency (21-30) -->
            <div class="section-container section-3">
                <div class="section-header">
                    <div class="section-title">üíé Giai ƒëo·∫°n 3: Tr√¥i ch·∫£y n√¢ng cao</div>
                    <p class="section-subtitle">B√†i 21-30: Th√†nh th·∫°o c√°c ch·ªß ƒë·ªÅ ph·ª©c t·∫°p</p>
                </div>
                <div class="lessons-grid" id="section-3-grid"></div>
            </div>

            <!-- SECTION 4: Mastery Level (31-40) -->
            <div class="section-container section-4">
                <div class="section-header">
                    <div class="section-title">üëë Giai ƒëo·∫°n 4: Tr√¨nh ƒë·ªô chuy√™n nghi·ªáp</div>
                    <p class="section-subtitle">B√†i 31-40: Ho√†n thi·ªán k·ªπ nƒÉng Speaking band 8.0+</p>
                </div>
                <div class="lessons-grid" id="section-4-grid"></div>
            </div>

        </div>
    </div>

    <div class="chat-widget">
        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                <span>ü§ñ IELTS Tutor AI</span>
                <span style="cursor:pointer" onclick="toggleChat()">√ó</span>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="message ai-msg">Xin ch√†o! M√¨nh l√† tr·ª£ l√Ω IELTS. B·∫°n c·∫ßn gi√∫p g√¨ v·ªÅ c√°c b√†i h·ªçc h√¥m nay kh√¥ng?</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Nh·∫≠p c√¢u h·ªèi...">
                <button onclick="sendMessage()">G·ª≠i</button>
            </div>
        </div>
        <div class="chat-button" onclick="toggleChat()">üí¨</div>
    </div>

    <script>
    // --- 1. BI·∫æN TO√ÄN C·ª§C ---
    let currentVideoId = '';

    // CANVAS ANIMATION (GI·ªÆ NGUY√äN PH·∫¶N N·ªÄN ƒê·ªòNG)
    const canvas = document.getElementById('animal-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let animals = [];
    
    const animalImages = [
        'https://cdn-icons-png.flaticon.com/512/616/616408.png',
        'https://cdn-icons-png.flaticon.com/512/616/616430.png',
        'https://cdn-icons-png.flaticon.com/512/616/616554.png',
        'https://cdn-icons-png.flaticon.com/512/375/375112.png'
    ];

    class ChubbyAnimal {
        constructor() {
            this.img = new Image();
            this.img.src = animalImages[Math.floor(Math.random() * animalImages.length)];
            this.loaded = false;
            this.img.onload = () => { this.loaded = true; };
            this.size = Math.random() * 80 + 100;
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.vx = (Math.random() - 0.5) * 0.8;
            this.vy = (Math.random() - 0.5) * 0.8;
            this.angle = 0;
            this.spinSpeed = (Math.random() - 0.5) * 0.01;
        }
        update() {
            this.x += this.vx;
            this.y += this.vy;
            this.angle += this.spinSpeed;
            if (this.x < -100 || this.x > width + 100) this.vx *= -1;
            if (this.y < -100 || this.y > height + 100) this.vy *= -1;
        }
        draw() {
            if (!this.loaded) return;
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.angle);
            ctx.globalAlpha = 0.6;
            ctx.drawImage(this.img, -this.size/2, -this.size/2, this.size, this.size);
            ctx.restore();
        }
    }

    function initCanvas() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        animals = [];
        for(let i = 0; i < 8; i++) {
            animals.push(new ChubbyAnimal());
        }
    }

    function animateCanvas() {
        ctx.clearRect(0, 0, width, height);
        animals.forEach(animal => {
            animal.update();
            animal.draw();
        });
        requestAnimationFrame(animateCanvas);
    }

    initCanvas();
    animateCanvas();
    window.addEventListener('resize', initCanvas);

    // --- 2. D·ªÆ LI·ªÜU B√ÄI H·ªåC (C·∫§U H√åNH CHO GOOGLE DRIVE) ---
    // C√ÅCH L·∫§Y ID: Link Drive l√† https://drive.google.com/file/d/ABCXYZ123/view -> ID l√† ABCXYZ123
    const lessonData = {
        section1: [
            { icon: "üìö", tag: "Introduction", title: "Gi·ªõi thi·ªáu chung", videoId: "1xmqYGFs1jHCaxe6lQ6qRKWPU6oj8M9jG" }, 
            { icon: "‚ù§Ô∏è", tag: "Strategy", title: "B·∫£ng l√Ω do th√≠ch/gh√©t", videoId: "1x0-nvdrib56qqUe9l5MyLUX9vPtRYXhl" },
            { icon: "üëç", tag: "Questions", title: "Do you like X", videoId: "1fE_NTxlljI9Z6iIu2OfhI7dg1sMUWmjP" },
            { icon: "‚≠ê", tag: "Strategy", title: "Chi·∫øn thu·∫≠t Favourite", videoId: "1Xn6g9KxWJjCgv3xuOmGaYkrhx9o_7dgz" },
            { icon: "üéØ", tag: "Questions", title: "What kind of X", videoId: "1BGuqWmtUDstWHRgKECWOq-sYw6eIkkVW" },
            { icon: "‚öñÔ∏è", tag: "Questions", title: "Do you prefer X or Y", videoId: "1_do2EEWY56pk4wsPguEg5JtEL3N4KI-q" },
            { icon: "üåç", tag: "Questions", title: "Is X popular", videoId: "1lSNNWG2BdItJnLBPVkAgrtB71N5fhgSu" },
            { icon: "‚è∞", tag: "Questions", title: "Best time to do X", videoId: "16ua4cyRxjAfOzVrzLEbpjNQseoVt-9QG" },
            { icon: "üìÖ", tag: "Questions", title: "First/Last time", videoId: "1vIPS3qUBNppCnJdGclPrpqoRlkpkBVcp" },
            { icon: "üë∂", tag: "Questions", title: "Childhood memories", videoId: "1YFvASfP5J4m2cKo9ZRwpavqnihdv5aIB" }
        ],
        section2: [
            { icon: "‚úÖ", tag: "Questions", title: "Is X suitable for", videoId: "1FtTgbNJjz_HBLwebBLgtIMhbOjlsMnyT" },
            { icon: "ü§î", tag: "Questions", title: "Easy or difficult", videoId: "1ZHkAnQqmER0p5ktwWPhOSm6NCDob2_N4" },
            { icon: "üëé", tag: "Questions", title: "Dislike about X", videoId: "1h3ECFP1je3X156sKvAKp-u1WsD5g3z2A" },
            { icon: "üîÑ", tag: "Questions", title: "How often", videoId: "1qC8yV3bH8Snj7caUIdnx6AjrBzWq6c_Y" },
            { icon: "üìà", tag: "Questions", title: "How has X changed", videoId: "1Y8AJSfTPuj-EUIJVxl8MrdMhAwQmk2dy" },
            { icon: "üë¥", tag: "Describe", title: "Describe a person", videoId: "18Ksu2YuM4Fm6ap5e2TjruKgRNufnkNgY" },
            { icon: "üë®", tag: "Describe", title: "Describe a friend", videoId: "1Cq1vGI_kglTMrZE0xs_SV0BiAw18JDZq" },
            { icon: "üëî", tag: "Describe", title: "Describe a teacher", videoId: "11Ff2mj2SNAZJm6s3DNJQ6MWfhXX5KuPw" },
            { icon: "‚òï", tag: "Describe", title: "Describe a cafe", videoId: "1agRMlsWBi5eBAP8fz7aWMRqwUpgIgSxz" },
            { icon: "üçú", tag: "Describe", title: "Describe a restaurant", videoId: "1qoZId3iHQLLwOwyOUhs27Yqfvi-zR7xS" }
        ],
        section3: [
            { icon: "üèõÔ∏è", tag: "Describe", title: "Describe a museum", videoId: "1WZkiaYTzGd3G6nZRrBXq0bZp2fHgesum" },
            { icon: "üá∞üá∑", tag: "Describe", title: "Describe a country", videoId: "1vAFAhjw9FQWnwHQmLV_T9cTngpMeN3gA" },
            { icon: "üèñÔ∏è", tag: "Describe", title: "Describe a city", videoId: "1CfopiP9Z4S0H7peyZOFZfRr42o-vNWxA" },
            { icon: "üá¨üáß", tag: "Describe", title: "Describe a foreign country", videoId: "17SGGPxG5a92-otXSOwLtE0DY1QruaUNC" },
            { icon: "üéâ", tag: "Describe", title: "Describe a holiday", videoId: "1cMDj08kGmQZIDMyEq1xd3KOW4xsbpw5K" },
            { icon: "üéÇ", tag: "Describe", title: "Describe a party", videoId: "116RK7E2Fh-0fqmKcoB6U_Mh5ecarmI5n" },
            { icon: "üõ†Ô∏è", tag: "Describe", title: "Describe a skill", videoId: "1dwiVxfh1PZObKDC7g5LLBE4AcTC4ap2e" },
            { icon: "üó∫Ô∏è", tag: "Describe", title: "Describe a situation", videoId: "1J7OVTOd_q06m7b2XpXEIyC8op1SjC38n" },
            { icon: "‚è±Ô∏è", tag: "Describe", title: "Describe being late", videoId: "h1Uw08-dS2Uk_h0ikBCHFf9jy_K3-zgxZh" },
            { icon: "üëÆ", tag: "Describe", title: "Describe a rule", videoId: "1XVKZTS8u9kdRbBeChrPCaISDO-vK-Kw5" }
        ],
        section4: [
            { icon: "ü™ë", tag: "Describe", title: "Describe furniture", videoId: "1Fup51iuEL_VstqBPT-wVmEg3BXJ24Q94" },
            { icon: "üëó", tag: "Describe", title: "Describe clothing", videoId: "1f4J5dXedPZqy3s99BTpoxLR3ugRcfxjb" },
            { icon: "üéÅ", tag: "Describe", title: "Describe a gift", videoId: "1R_oTzFUdNpoaBtvF2AKrIchwrhjnMh4n" },
            { icon: "üíª", tag: "Favourite", title: "Favourite website", videoId: "1gzPg08qbtlKMWHQxVPrEyd27NQ2l7ePR" },
            { icon: "üåÖ", tag: "Favourite", title: "Favourite time", videoId: "1oVQGaXAgiHnY64ZUGqb-gfic0z2kGfjR" },
            { icon: "ü¶Å", tag: "Favourite", title: "Favourite animal", videoId: "13uUUimq_BF7KxzcppsHf9UqbTlGgTzZI" },
            { icon: "ü§ù", tag: "Discussion", title: "Agree/Disagree", videoId: "1gdlfnrVdO_6MRYAHorgmoj7lTy3iQSSc" },
            { icon: "‚öñÔ∏è", tag: "Discussion", title: "Pros and Cons", videoId: "1AibU3zZNe_lh1ALzrnEgeWE3Mnoj86TV" },
            { icon: "üîÆ", tag: "Discussion", title: "Predictions", videoId: "1qLFJ30BclvvVig0_wBxPmwwWqhM-lvx6" },
            { icon: "üîÑ", tag: "Discussion", title: "Differences", videoId: "1Gjocw5Ykb9yArV5hYO3K2zvnb_rnu_6a" }
        ]
    };

    function createLessons(sectionData, gridId, startNum) {
        const grid = document.getElementById(gridId);
        sectionData.forEach((lesson, index) => {
            const lessonNum = startNum + index;
            const card = document.createElement('div');
            card.classList.add('lesson-card');
            card.innerHTML = `
                <div class="lesson-number">${lessonNum}</div>
                <div class="card-content">
                    <div class="lesson-icon">${lesson.icon}</div>
                    <div>
                        <span class="lesson-tag">${lesson.tag}</span>
                        <h3 class="lesson-title">Day ${lessonNum}:<br>${lesson.title}</h3>
                    </div>
                </div>
            `;
            // S·ª≠a l·ªói hi·ªÉn th·ªã ti√™u ƒë·ªÅ
            card.addEventListener('click', () => openLesson(lessonNum, lesson)); 
            grid.appendChild(card);
        });
    }

    createLessons(lessonData.section1, 'section-1-grid', 1);
    createLessons(lessonData.section2, 'section-2-grid', 11);
    createLessons(lessonData.section3, 'section-3-grid', 21);
    createLessons(lessonData.section4, 'section-4-grid', 31);

    // GSAP ANIMATIONS
    gsap.from("h1", { y: -100, opacity: 0, duration: 1.5, ease: "elastic.out(1, 0.5)" });
    gsap.from(".subtitle", { scale: 0.8, opacity: 0, duration: 1, delay: 0.5, ease: "back.out(2)" });
    gsap.from("header .btn-cute", { y: 50, opacity: 0, duration: 1, delay: 0.8, ease: "elastic.out(1, 0.6)" });
    
    gsap.registerPlugin(ScrollTrigger);
    gsap.utils.toArray('.section-container').forEach(section => {
        gsap.from(section.querySelectorAll('.lesson-card'), {
            scrollTrigger: { trigger: section, start: "top 85%" },
            scale: 0.5, opacity: 0, duration: 1.2, stagger: 0.04, 
            ease: "elastic.out(1, 0.5)", clearProps: "all"
        });
    });

    // --- 3. LOGIC MODAL & VIDEO FULL M√ÄN H√åNH (D·∫†NG R·∫†P CHI·∫æU PHIM) ---
    
    // [T·ª∞ ƒê·ªòNG T·∫†O HTML & CSS CHO KHUNG FULL SCREEN]
    // ƒêo·∫°n n√†y gi√∫p b·∫°n kh√¥ng c·∫ßn s·ª≠a file HTML hay CSS th·ªß c√¥ng
    const fullscreenStyle = document.createElement('style');
    fullscreenStyle.innerHTML = `
        .fullscreen-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.4s ease;
        }
        .fullscreen-overlay.active { opacity: 1; pointer-events: all; }
        .fullscreen-video-container {
            width: 90%; height: 80%; background: #000; border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 107, 107, 0.5); overflow: hidden; position: relative;
        }
        .close-fullscreen-btn {
            position: absolute; top: 20px; right: 30px; color: white; font-size: 3rem;
            background: none; border: none; cursor: pointer; font-weight: bold; z-index: 10000;
        }
        .close-fullscreen-btn:hover { color: #FF6B6B; transform: scale(1.2); }
    `;
    document.head.appendChild(fullscreenStyle);

    const fullscreenHTML = `
        <div class="fullscreen-overlay" id="fullscreen-overlay">
            <button class="close-fullscreen-btn" onclick="closeFullscreenVideo()">&times;</button>
            <div class="fullscreen-video-container" id="fullscreen-video-container"></div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', fullscreenHTML);

    // --- C√ÅC H√ÄM X·ª¨ L√ù ---

    function scrollToLessons() {
        document.getElementById('lessons').scrollIntoView({ behavior: 'smooth' });
    }

    const overlay = document.getElementById('overlay');
    const modalTitle = document.getElementById('modal-title');
    const overlayContent = document.querySelector('.overlay-content');
    const videoContainer = document.getElementById('video-container'); // Khung nh·ªè (n·∫øu c√≤n d√πng)

    // C√°c ph·∫ßn t·ª≠ Fullscreen v·ª´a t·∫°o
    const fullscreenOverlay = document.getElementById('fullscreen-overlay');
    const fullscreenContainer = document.getElementById('fullscreen-video-container');

    // H√†m m·ªü b·∫£ng th√¥ng tin b√†i h·ªçc (Popup nh·ªè)
    function openLesson(id, data) {
        modalTitle.innerText = "Day " + id + ": " + data.title;
        currentVideoId = data.videoId;

        overlay.classList.add('active');
        gsap.fromTo(overlayContent,
            { scale: 0.7, opacity: 0 },
            { scale: 1, opacity: 1, duration: 0.6, ease: "elastic.out(0.8, 0.6)" }
        );
    }

    // H√†m ƒë√≥ng b·∫£ng th√¥ng tin
    function closeLesson() {
        gsap.to(overlayContent,
            { scale: 0.8, opacity: 0, duration: 0.3, ease: "power2.in", onComplete: () => {
                overlay.classList.remove('active');
            }}
        );
    }

    // --- H√ÄM QUAN TR·ªåNG: PH√ÅT VIDEO FULL M√ÄN H√åNH ---
    function playVideo() {
        if (!currentVideoId) {
            alert("Video ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t!");
            return;
        }

        // 1. Ch√®n Iframe Google Drive v√†o khung Fullscreen
        fullscreenContainer.innerHTML = `
            <iframe 
                src="https://drive.google.com/file/d/${currentVideoId}/preview" 
                width="100%" 
                height="100%" 
                style="border: none;"
                allow="autoplay; fullscreen">
            </iframe>
        `;

        // 2. Hi·ªÉn th·ªã l·ªõp ph·ªß
        fullscreenOverlay.classList.add('active');

        // 3. Hi·ªáu ·ª©ng ph√≥ng to
        gsap.fromTo(fullscreenContainer, 
            { scale: 0.5, opacity: 0 }, 
            { scale: 1, opacity: 1, duration: 0.5, ease: "back.out(1.2)" }
        );
    }

    // H√†m ƒë√≥ng video Full m√†n h√¨nh
    function closeFullscreenVideo() {
        gsap.to(fullscreenContainer, {
            scale: 0.5, opacity: 0, duration: 0.3, ease: "power2.in",
            onComplete: () => {
                fullscreenOverlay.classList.remove('active');
                fullscreenContainer.innerHTML = ""; // X√≥a iframe ƒë·ªÉ t·∫Øt ti·∫øng
            }
        });
    }

    // S·ª± ki·ªán Click ra ngo√†i ƒë·ªÉ ƒë√≥ng
    overlay.addEventListener('click', (e) => {
        if (e.target === overlay) closeLesson();
    });
    
    // Click v√†o v√πng ƒëen khi xem video th√¨ t·∫Øt video
    fullscreenOverlay.addEventListener('click', (e) => {
        if (e.target === fullscreenOverlay) closeFullscreenVideo();
    });
    </script>
    // --- 1. C·∫§U H√åNH GOOGLE GEMINI API ---
    <script>    
    const GEMINI_API_KEY = "AlzaSyClCovZywRCZyMydsv9pPD2P_Pd2UTKzdU";

    // --- 2. LOGIC ƒêI·ªÄU KHI·ªÇN CHATBOT ---

    // H√†m ƒë√≥ng/m·ªü c·ª≠a s·ªï chat
    function toggleChat() {
        const chatWin = document.getElementById('chat-window');
        const isActive = chatWin.classList.toggle('active');

        if (isActive) {
            // Hi·ªáu ·ª©ng m·ªü m∆∞·ª£t m√† b·∫±ng GSAP
            gsap.fromTo(chatWin, 
                { scale: 0.8, opacity: 0, y: 50 }, 
                { scale: 1, opacity: 1, y: 0, duration: 0.4, ease: "back.out(1.7)" }
            );
            document.getElementById('chat-input').focus();
        }
    }

    // H√†m g·ª≠i tin nh·∫Øn v√† nh·∫≠n ph·∫£n h·ªìi t·ª´ AI
    async function sendMessage() {
        const input = document.getElementById('chat-input');
        const container = document.getElementById('chat-messages');
        const userText = input.value.trim();

        // Ki·ªÉm tra n·∫øu n·ªôi dung tr·ªëng
        if (!userText) return;

        // 1. Hi·ªÉn th·ªã tin nh·∫Øn c·ªßa Ng∆∞·ªùi d√πng
        const userDiv = document.createElement('div');
        userDiv.className = 'message user-msg';
        userDiv.innerText = userText;
        container.appendChild(userDiv);

        // X√≥a n·ªôi dung input v√† cu·ªôn xu·ªëng d∆∞·ªõi
        input.value = '';
        container.scrollTop = container.scrollHeight;

        // 2. T·∫°o tin nh·∫Øn ch·ªù c·ªßa AI
        const loadingId = 'ai-loading-' + Date.now();
        const aiDiv = document.createElement('div');
        aiDiv.className = 'message ai-msg';
        aiDiv.id = loadingId;
        aiDiv.innerText = "ƒêang suy nghƒ©...";
        container.appendChild(aiDiv);
        container.scrollTop = container.scrollHeight;

        try {
            // 3. G·ªçi API Google Gemini
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ 
                            text: `B·∫°n l√† tr·ª£ l√Ω IELTS th√¢n thi·ªán tr√™n website "IELTS Speaking Wonderland". H√£y tr·∫£ l·ªùi ng·∫Øn g·ªçn, s√∫c t√≠ch v√† kh√≠ch l·ªá ng∆∞·ªùi h·ªçc b·∫±ng ti·∫øng Vi·ªát: ${userText}` 
                        }]
                    }]
                })
            });

            const data = await response.json();
            
            // L·∫•y vƒÉn b·∫£n tr·∫£ v·ªÅ t·ª´ JSON
            if (data.candidates && data.candidates[0].content) {
                const aiText = data.candidates[0].content.parts[0].text;
                document.getElementById(loadingId).innerText = aiText;
            } else {
                throw new Error("API Error");
            }

        } catch (error) {
            console.error("Gemini Error:", error);
            document.getElementById(loadingId).innerText = "R·∫•t ti·∫øc, m√¨nh ƒëang b·∫≠n m·ªôt ch√∫t. B·∫°n th·ª≠ l·∫°i sau nh√©!";
            document.getElementById(loadingId).style.color = "red";
        }

        // Lu√¥n cu·ªôn xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t
        container.scrollTop = container.scrollHeight;
    }

    // L·∫Øng nghe s·ª± ki·ªán nh·∫•n ph√≠m Enter tr√™n √¥ nh·∫≠p li·ªáu
    document.getElementById('chat-input').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    // --- 3. ƒê·∫¢M B·∫¢O C√ÅC H√ÄM C≈® V·∫™N HO·∫†T ƒê·ªòNG ---
    function scrollToLessons() {
        const section = document.getElementById('lessons');
        if (section) section.scrollIntoView({ behavior: 'smooth' });
    }
    </script>
</body>
</html>
